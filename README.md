# carbonlock

Welcome to our new carbonlock project and to the internet computer development community. By default, creating a new project adds this README and some template files to your project directory. You can edit these template files to customize your project and to include your own code to speed up the development cycle.

To get started, you might want to explore the project directory structure and the default configuration file. Working with this project in your development environment will not affect any production deployment or identity tokens.

To learn more before you start working with carbonlock, see the following documentation available online:

- [Quick Start](https://internetcomputer.org/docs/current/developer-docs/setup/deploy-locally)
- [SDK Developer Tools](https://internetcomputer.org/docs/current/developer-docs/setup/install)
- [Rust Canister Development Guide](https://internetcomputer.org/docs/current/developer-docs/backend/rust/)
- [ic-cdk](https://docs.rs/ic-cdk)
- [ic-cdk-macros](https://docs.rs/ic-cdk-macros)
- [Candid Introduction](https://internetcomputer.org/docs/current/developer-docs/backend/candid/)

If you want to start working on your project right away, you might want to try the following commands:

```bash
cd carbonlock/
dfx help
dfx canister --help
```

## Running the project locally

If you want to test your project locally, you can use the following commands:

```bash
# Starts the replica, running in the background
dfx start --background

# Deploys your canisters to the replica and generates your candid interface
dfx deploy
```

Once the job completes, your application will be available at `http://localhost:4943?canisterId={asset_canister_id}`.

If you have made changes to your backend canister, you can generate a new candid interface with

```bash
npm run generate
```

at any time. This is recommended before starting the frontend development server, and will be run automatically any time you run `dfx deploy`.

If you are making frontend changes, you can start a development server with

```bash
npm start
```

Which will start a server at `http://localhost:8080`, proxying API requests to the replica at port 4943.

### Note on frontend environment variables

If you are hosting frontend code somewhere without using DFX, you may need to make one of the following adjustments to ensure your project does not fetch the root key in production:

- set`DFX_NETWORK` to `ic` if you are using Webpack
- use your own preferred method to replace `process.env.DFX_NETWORK` in the autogenerated declarations
  - Setting `canisters -> {asset_canister_id} -> declarations -> env_override to a string` in `dfx.json` will replace `process.env.DFX_NETWORK` with the string in the autogenerated declarations
- Write your own `createActor` constructor

## üñ•Ô∏è Using the CarbonLock UI

### How to Use

1. **Start the local replica and deploy:**
   ```bash
   dfx start --clean --background
   dfx deploy
   ```

2. **Open the frontend:**
   - Visit the URL shown in the deploy output, e.g.  
     `http://localhost:4943/?canisterId=bd3sg-teaaa-aaaaa-qaaba-cai`

3. **Create a contract:**
   - Fill in the form at the top with the buyer, seller, amount (in tons), price (USD), and fulfillment year.
   - Click **Create Contract**.
   - A status message will confirm creation or show errors.
   - The new contract will appear in the table below, highlighted briefly for visibility.

4. **View contracts:**
   - All existing contracts are listed in a table below the form.
   - The table updates automatically after you add a contract.

### Features

- **Form validation:** Prevents invalid or empty submissions.
- **Status feedback:** Success and error messages are shown at the top.
- **Responsive table:** Contracts are displayed in a clear, sortable table.
- **Modern look:** Uses Bootstrap for a clean, professional UI.

---

If you encounter issues, make sure you are running the frontend from the correct canister URL and that your backend canister is deployed.

## How Does This Project Work?

### Architecture

- **Frontend:**  
  HTML/JS (with Bootstrap) UI for creating and viewing carbon credit futures contracts.
- **Backend:**  
  Rust canister (smart contract) on the Internet Computer (IC) that stores contract data and exposes methods to create and list contracts.
- **Communication:**  
  The frontend uses DFINITY‚Äôs JS agent to call backend canister methods via HTTP.

### Workflow

1. User fills out the form and submits a new contract.
2. Frontend JS calls the backend canister‚Äôs `create_contract` method.
3. Backend stores the contract in its state.
4. Frontend calls `list_contracts` to fetch all contracts and displays them in a table.

## Can We Make It Real?

Yes! This project is a solid prototype for a real decentralized app (dapp) on the Internet Computer. To make it production-ready:

### What‚Äôs Needed for a Real-World App

- **Authentication:**  
  Integrate Internet Identity or another auth system so users can prove ownership.
- **Persistence:**  
  Ensure the backend canister‚Äôs state is stable and can handle upgrades.
- **Cycles Management:**  
  Add logic to monitor and refill cycles (IC‚Äôs ‚Äúgas‚Äù).
- **Security:**  
  Validate and sanitize all inputs, handle errors gracefully.
- **UI/UX Polish:**  
  Add more features (edit/delete, filtering, etc.), mobile optimization, and accessibility.
- **Mainnet Deployment:**  
  Deploy to the IC mainnet, not just local replica.
- **Legal/Compliance:**  
  For real carbon credits, ensure compliance with relevant regulations.

---

**Summary:**  
our project is a working dapp prototype for carbon credit contracts.  
Fix the UI update by ensuring `loadContracts()` is called after contract creation and check for errors.  
With some enhancements, you can make this a real, production-ready decentralized application.
